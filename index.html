<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Trading</title>
    <style>
        /* Estilos básicos y animaciones */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f4f6f8;
        }
        .header {
            width: 100%;
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            text-align: center;
            font-size: 24px;
        }
        .container {
            max-width: 1200px;
            width: 100%;
            padding: 20px;
            margin-top: 20px;
        }
        .balance {
            font-size: 24px;
            margin-bottom: 20px;
        }
        .modal {
            display: flex;
            flex-direction: column;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 300px;
            text-align: center;
        }
        .modal input, .lesson-card, .exam, .trade-card {
            padding: 10px;
            margin-top: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .modal button, .lesson-card button, .start-exam-button, .trade-card button {
            padding: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }
        /* Animaciones */
        .lesson-card:hover, .trade-card:hover {
            transform: scale(1.05);
            transition: transform 0.3s;
        }
        .progress-bar {
            height: 20px;
            width: 0;
            background-color: #4caf50;
            border-radius: 10px;
            transition: width 0.5s;
        }
        .trading-section {
            margin-top: 20px;
        }
    </style>
</head>
<body>

<div class="header">
    Simulador de Trading
</div>

<div class="container">
    <div class="balance" id="balance">Saldo: $0</div>

    <!-- Modal de recarga de saldo -->
    <div class="modal" id="modalRecarga">
        <h2>Recarga tu Saldo Inicial</h2>
        <input type="number" id="inputSaldo" placeholder="Ingresa saldo inicial" min="100" step="100">
        <button onclick="recargarSaldo()">Recargar</button>
    </div>

    <!-- Sección de gráficos -->
    <div id="tradingview-chart" style="height: 500px; width: 100%; margin-bottom: 20px;"></div>

    <!-- Sección de Clases de Trading -->
    <h2>Clases de Trading</h2>
    <div id="clases">
        <div class="lesson-card">
            <h3>Clase 1: Introducción al Trading</h3>
            <p>Aprende los conceptos básicos, terminología y el mercado de acciones.</p>
            <button onclick="iniciarClase('Clase 1')">Iniciar Clase</button>
        </div>
        <div class="lesson-card">
            <h3>Clase 2: Análisis Técnico Básico</h3>
            <p>Entiende cómo leer gráficos de velas y patrones de precios.</p>
            <button onclick="iniciarClase('Clase 2')">Iniciar Clase</button>
        </div>
        <!-- Agregar más clases según sea necesario -->
    </div>

    <!-- Sección de Trading -->
    <div class="trading-section">
        <h2>Comprar/Vender Acciones</h2>
        <div class="trade-card">
            <h3>Acción: Apple (AAPL)</h3>
            <p>Precio actual: <span id="currentPrice">Cargando...</span></p>
            <input type="number" id="cantidad" placeholder="Cantidad" min="1">
            <button onclick="comprarAcciones()">Comprar</button>
            <button onclick="venderAcciones()">Vender</button>
        </div>
        <h3>Acciones Compradas:</h3>
        <div id="accionesCompradas"></div>
    </div>

    <!-- Sección de Exámenes -->
    <div id="examen" style="display:none;">
        <h2>Examen de la Clase</h2>
        <p>Pregunta: ¿Qué representa una vela verde en un gráfico de velas?</p>
        <input type="text" id="respuesta" placeholder="Escribe tu respuesta">
        <button onclick="verificarRespuesta()">Enviar Respuesta</button>
        <div class="progress-bar" id="progressBar"></div>
    </div>
</div>

<!-- Script para TradingView -->
<script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
<script>
    let saldo = 0;
    let acciones = 0;
    const precioAccion = 150; // Simulamos el precio de la acción de Apple

    // Función para manejar la recarga de saldo
    function recargarSaldo() {
        const inputSaldo = document.getElementById("inputSaldo");
        saldo = parseFloat(inputSaldo.value);
        if (saldo > 0) {
            localStorage.setItem("saldo", saldo);
            document.getElementById("balance").innerText = "Saldo: $" + saldo;
            document.getElementById("modalRecarga").style.display = "none";
        } else {
            alert("Por favor, ingresa un saldo válido.");
        }
    }

    // Mostrar el saldo guardado o mostrar el modal de recarga
    window.onload = function() {
        const saldoGuardado = parseFloat(localStorage.getItem("saldo"));
        if (saldoGuardado && saldoGuardado > 0) {
            saldo = saldoGuardado;
            document.getElementById("balance").innerText = "Saldo: $" + saldo;
            document.getElementById("modalRecarga").style.display = "none";
        } else {
            document.getElementById("modalRecarga").style.display = "flex";
        }

        // Mostrar el precio actual de la acción
        document.getElementById("currentPrice").innerText = `$${precioAccion}`;
    };

    // Script para integrar el gráfico de TradingView
    new TradingView.widget({
        "container_id": "tradingview-chart",
        "width": "100%",
        "height": "500",
        "symbol": "NASDAQ:AAPL",
        "interval": "D",
        "timezone": "Etc/UTC",
        "theme": "light",
        "style": "1",
        "locale": "es",
        "toolbar_bg": "#f1f3f6",
        "enable_publishing": false,
        "hide_side_toolbar": false,
        "allow_symbol_change": true,
        "studies": ["RSI@tv-basicstudies"],
        "show_popup_button": true,
        "popup_width": "1000",
        "popup_height": "650"
    });

    // Función para iniciar una clase
    function iniciarClase(clase) {
        alert("Iniciando " + clase);
        document.getElementById("examen").style.display = "block";
    }

    // Función para verificar la respuesta del examen
    function verificarRespuesta() {
        const respuesta = document.getElementById("respuesta").value.toLowerCase();
        if (respuesta === "aumento de precio" || respuesta === "subida") {
            alert("¡Correcto!");
            document.getElementById("progressBar").style.width = "100%";
        } else {
            alert("Respuesta incorrecta, intenta de nuevo.");
        }
    }

    // Función para comprar acciones
    function comprarAcciones() {
        const cantidad = parseInt(document.getElementById("cantidad").value);
        if (cantidad > 0 && (cantidad * precioAccion) <= saldo) {
            saldo -= cantidad * precioAccion;
            acciones += cantidad;
            localStorage.setItem("saldo", saldo);
            document.getElementById("balance").innerText = "Saldo: $" + saldo;
            mostrarAccionesCompradas();
            alert("Compraste " + cantidad + " acciones de Apple.");
        } else {
            alert("Fondos insuficientes o cantidad no válida.");
        }
    }

    // Función para vender acciones
    function venderAcciones() {
        const cantidad = parseInt(document.getElementById("cantidad").value);
        if (cantidad > 0 && cantidad <= acciones) {
            saldo += cantidad * precioAccion;
            acciones -= cantidad;
            localStorage.setItem("saldo", saldo);
            document
